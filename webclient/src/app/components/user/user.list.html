<div layout="row">
  <div class="div-content-padding" class="content" layout-align="center center">
    <div ng-show="userCtrlList.list.length === 0" layout="column" layout-align="center center">
      <div class="div-there-nothing" align="center" layout-align="center center">
        <ng-md-icon icon="rowing" size="80" class="img_menu"></ng-md-icon>
      </div>
      <span class="there-nothing" translate="INFO_NO_USER_ID"></span>
    </div>

    <div ng-show="userCtrlList.list.length > 0">

      <div layout="row">
        <div flex="33" align="center">
          <span ng-click="userCtrlList.orderBy('first_name')">
            <a class="table-header-text-{{userCtrlList.checkLastField('first_name')}}" id="first_name">
              <span translate="USER_FIRST_NAME_ID"></span>
              <ng-md-icon icon="keyboard_arrow_down" ng-show="userCtrlList.ascendant && userCtrlList.isLastSortedField('first_name')"></ng-md-icon>
              <ng-md-icon icon="keyboard_arrow_up" ng-show="!userCtrlList.ascendant && userCtrlList.isLastSortedField('first_name')"></ng-md-icon>
            </a>
          </span>
        </div>
        <div flex="33" align="center">
           <span ng-click="userCtrlList.orderBy('last_name')">
            <a class="table-header-text-{{userCtrlList.checkLastField('last_name')}}" id="last_name">
              <span translate="USER_LAST_NAME_ID"></span>
              <ng-md-icon icon="keyboard_arrow_down" ng-show="userCtrlList.ascendant && userCtrlList.isLastSortedField('last_name')"></ng-md-icon>
              <ng-md-icon icon="keyboard_arrow_up" ng-show="!userCtrlList.ascendant && userCtrlList.isLastSortedField('last_name')"></ng-md-icon>
            </a>
          </span>
        </div>

        <div flex="33" align="center">
           <span ng-click="userCtrlList.orderBy('email')">
            <a class="table-header-text-{{userCtrlList.checkLastField('email')}}" id="email">
              <span translate="EMAIL_ID"></span>
              <ng-md-icon icon="keyboard_arrow_down" ng-show="userCtrlList.ascendant && userCtrlList.isLastSortedField('email')"></ng-md-icon>
              <ng-md-icon icon="keyboard_arrow_up" ng-show="!userCtrlList.ascendant && userCtrlList.isLastSortedField('email')"></ng-md-icon>
            </a>
          </span>
        </div>

        <div flex="33" align="center">
           <span ng-click="userCtrlList.orderBy('username')">
            <a class="table-header-text-{{userCtrlList.checkLastField('username')}}" id="username">
              <span translate="USER_USERNAME_ID"></span>
              <ng-md-icon icon="keyboard_arrow_down" ng-show="userCtrlList.ascendant && userCtrlList.isLastSortedField('username')"></ng-md-icon>
              <ng-md-icon icon="keyboard_arrow_up" ng-show="!userCtrlList.ascendant && userCtrlList.isLastSortedField('username')"></ng-md-icon>
            </a>
          </span>
        </div>

        <div flex="33" align="center">
           <span ng-click="userCtrlList.orderBy('groups')">
            <a class="table-header-text-{{userCtrlList.checkLastField('groups')}}" id="groups">
              <span translate="GROUP_ID"></span>
              <ng-md-icon icon="keyboard_arrow_down" ng-show="userCtrlList.ascendant && userCtrlList.isLastSortedField('groups')"></ng-md-icon>
              <ng-md-icon icon="keyboard_arrow_up" ng-show="!userCtrlList.ascendant && userCtrlList.isLastSortedField('groups')"></ng-md-icon>
            </a>
          </span>
        </div>
      </div>

      <md-divider></md-divider>

      <div layout="row" layout-wrap layout-align="start center" infinite-scroll="userCtrlList.nextList()">
        <div flex="auto" ng-repeat="user in userCtrlList.list">
          <md-card class="card-list-banner card-list-region" layout="column"
                   ng-click="userCtrlList.showDialog($event, user)">

            <div flex="50" class="card-list-banner-content">
              <div layout-align="center center" layout="row">
                <div flex="100">
                  <h4 class="truncate-long-texts">{{user.first_name}} {{user.last_name}}</h4>
                </div>
              </div>
              <div layout="column">
                <small class=".truncate-long-texts">
                  <span translate="USER_USERNAME_ID"></span>
                  <span>{{user.username}}</span>
                </small>
              </div>

              <div layout="column">
                <small class=".truncate-long-texts">
                  <span translate="EMAIL_ID"></span>
                  <span>{{user.email}}</span>
                </small>
              </div>
            </div>
            <div layout="row">
              <div layout-padding flex layout-align="start end">
              </div>
            </div>
            <md-card-actions>
              <div layout="row">
                <div flex="100" align="end">
                  <spam ng-show="user.is_active" class="status-banner" translate="ENABLED_ID"></spam>
                  <spam ng-show="!user.is_active" class="status-banner" translate="DISABLED_ID"></spam>
                </div>
              </div>
            </md-card-actions>
          </md-card>
        </div>
      </div>
    </div>
  </div>
</div>

<gmm-fab tooltip="'NEW_USER_ID' | translate" stage-go="'home.settings.user.create'" gmm-fab-controller="userCtrlList.export">
  <gmm-fab-actions>
    <md-button aria-label="export" class="md-fab md-raised md-mini" ng-csv="gmmFabController.getCsvExport()"
               filename="{{gmmFabController.fileName}}" csv-header="gmmFabController.userHeader()">
      <md-tooltip md-direction="left" md-visible="tooltipVisible" md-autohide="false">
        {{'EXPORT_CSV_ID' | translate}}
      </md-tooltip>
      <ng-md-icon icon="archive" aria-label="csv" style="fill: #0d47a1"></ng-md-icon>
    </md-button>
  </gmm-fab-actions>
</gmm-fab>

<md-sidenav class="md-sidenav-right md-whiteframe-4dp sidenav-filter" md-component-id="right">
  <md-toolbar class="md-theme-light md-primary-gmm">
    <h1 class="md-toolbar-tools" translate="FILTER_USER_ID"></h1>
  </md-toolbar>
  <md-content layout-padding>
    <md-content layout="column">

      <md-input-container flex>
        <label>{{'NAME_ID' | translate}}</label>
        <input name="name" ng-model="userCtrlList.search.name">
      </md-input-container>

      <md-input-container flex>
        <label>{{'USER_USERNAME_ID' | translate}}</label>
        <input name="userUsername" ng-model="userCtrlList.search.username">
      </md-input-container>

      <md-input-container flex>
        <label>{{'EMAIL_ID' | translate}}</label>
        <input name="userEmail" ng-model="userCtrlList.search.email">
      </md-input-container>

      <md-input-container>
        <label translate="GROUP_ID"></label>
        <md-select ng-model="userCtrlList.search.group">
          <md-option value="">
          </md-option>
          <md-option ng-repeat="group in userCtrlList.groups" value="{{group.name}}">
            {{group.name}}
          </md-option>
        </md-select>
      </md-input-container>

      <div layout="row" flex>
        <md-input-container flex="80" class="md-block">
          <label translate="ORDER_ID"></label>
          <md-select name="userCtrlList.lastField"
                     ng-model="userCtrlList.lastField"
                     md-on-open="userCtrlList.ordinations()"
                     md-on-close="userCtrlList.filter()" required>
            <md-option ng-select="order" ng-value="order.key" ng-repeat="order in userCtrlList.ordersList">
              {{order.value}}
            </md-option>
          </md-select>
        </md-input-container>
        <md-input-container flex="20" class="md-block">
          <md-checkbox flex="auto" ng-change="userCtrlList.filter()" ng-model="userCtrlList.ascendant"
                       aria-label="desc">
            <span translate="DESC_ID"></span>
          </md-checkbox>
        </md-input-container>
      </div>

      <md-input-container>
        <md-checkbox ng-model="userCtrlList.search.active" aria-label="Is Active">
          {{'USER_IS_ACTIVE_ID' | translate}}
        </md-checkbox>
      </md-input-container>
    </md-content>

    <div layout="row" layout-align="center center">
      <md-button ng-click="userCtrlList.filter()" class="md-primary" aria-label="clear"
                 translate="SEARCH_ID"></md-button>
      <md-button ng-click="userCtrlList.clearFilter()" class="md-primary" aria-label="clear"
                 translate="CLEAR_ID"></md-button>
      <md-button ng-click="userCtrlList.closeSidenavFilter()" class="md-primary" aria-label="close"
                 translate="CLOSE_ID"></md-button>
    </div>
  </md-content>
</md-sidenav>
