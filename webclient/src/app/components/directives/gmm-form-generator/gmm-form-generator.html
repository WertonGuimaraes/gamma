<div class="nestedDemo">
  <script type="text/ng-template" id="list.html">
    <ul dnd-list="list"
        dnd-allowed-types="item.type == 'container' ? item.allowedTypes : models.max > 0 ? ['container'] :
         ['container' , 'item'] "
        dnd-disable-if="list.length >= models.max && item.type == 'container'">
      <li ng-repeat="item in list"
          dnd-draggable="item"
          dnd-effect-allowed="move"
          dnd-moved="list.splice($index, 1)"
          dnd-selected="models.selected = item"
          ng-class="{selected: models.selected === item}"
          ng-include="item.type + '.html'">
      </li>
    </ul>
  </script>

  <script type="text/ng-template" id="container.html">
    <div class="container-element box box-blue md-whiteframe-2dp">
      <div layout="row">
        <div flex class="tag-action"></div>
        <div flex>
          <div layout="column" class="form-container">
            <md-input-container flex="50">
              <label>{{item.name | translate}}</label>
              <input ng-init="itemName(item)" force-lower-case type="text" min="1" md-maxlength="30"
                     ng-model="item.id"
                     aria-label="item.id + item.count" required/>
            </md-input-container>
            <md-input-container flex="100" ng-if="item.desc != undefined">
              <label translate="DESCRIPTION_ID"></label>
              <textarea type="text" min="1" md-maxlength="150" ng-model="item.desc" rows="3" aria-label="item.desc">
              </textarea>
            </md-input-container>
          </div>
          <div class="drop" ng-if="item.name == 'action'">
            <div class="drop-span">
              <ng-md-icon icon="extension" size="20"></ng-md-icon>
              {{'DROP_VALUE_HERE_ID' | translate}}
            </div>
          </div>
          <div class="column" ng-repeat="list in item.columns" ng-include="'list.html'"></div>
          <div class="clearfix"></div>
        </div>
      </div>
    </div>
  </script>

  <script type="text/ng-template" id="item.html">
    <div layout="row" class="item">
      <div flex layout="row">
        <div flex class="tag-value"></div>
        <div flex layout="row" class="form-container">
          <md-input-container flex="100">
            <label>{{item.name | translate}}</label>
            <input ng-init="itemName(item)" force-lower-case type="text" md-maxlength="30"
                   ng-model="item.id" aria-label="item.id" required/>
          </md-input-container>
        </div>
      </div>
    </div>
  </script>

  <div class="col-md-9">
    <div class="row">
      <div ng-repeat="(zone, list) in models.dropzones">
        <div class="dropzone box box-yellow">
          <div class="drop">
            <div class="drop-span md-button">
              <ng-md-icon icon="extension" size="20"></ng-md-icon>
              {{'DROP_ELEMENTS_HERE_ID' | translate}}
            </div>
          </div>
          <div ng-include="'list.html'"></div>
        </div>
      </div>
    </div>

    <div view-source="nested"></div>
  </div>

  <div class="col-md-3">

    <div layout="column" flex layout-align="center center" class="toolbox box box-grey box-padding">
      <h3 translate="NEW_ELEMENTS_ID"></h3>
      <ul>
        <li ng-repeat="item in models.templates"
            dnd-draggable="item"
            dnd-type="item.type"
            dnd-effect-allowed="copy"
            dnd-copied="item.templateName.count = item.templateName.count + 1">
          <md-tooltip class="md-tooltip-config" md-direction="top">{{item.tooltip | translate}}</md-tooltip>
          <button id="botton-{{item.type}}" type="button" class="btn btn-default btn-lg" disabled="disabled">
            {{item.name | translate}}
          </button>
        </li>
      </ul>
    </div>

    <div layout="column" flex layout-align="center center" class="trashcan box box-grey box-padding">
      <h3 translate="TRASHCAN_ID"></h3>
      <ul class="trashcan-li" dnd-list="[]">
        <li><img src="../../../assets/img/ic_delete.svg"></li>
      </ul>
    </div>
  </div>
</div>
